<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Document</title>
</head>
<body>
  <div class="homepage-container"> 
    <header class="homepage-header"> 
      <nav class="main-nav">
          <div class="nav-brand">CU Game Dev Club</div>
          <button class="nav-toggle" aria-label="Toggle navigation menu">
            <span></span>
            <span></span>
            <span></span>
          </button>
          <ul class="nav-menu">
            <li><a href="wa7.html">Home</a></li>
            <li><a href="#join">Join</a></li>
            <li><a href="#events">Events</a></li>
            <li><a href="Projects.html"> Projects </a></li>
            <li><a href="#about">About Us</a></li>
          </ul>
        </nav>
      </header>
      <main class="homepage-slideshow"> 
          <div class="slideshow">
            <button class="prev" onclick="plusDivs(-1)">&#10094;</button>
            <button class="next" onclick="plusDivs(+1)">&#10095;</button>

            <div class="slideshow-photo fade">
              <img src="game-design.jpg" alt="game design">
            </div>

            <div class="slideshow-photo fade">
              <img src="boulder.avif" alt="boulder">
            </div>
          </div>
      </main>
      <footer class="homepage-footer"> 
        <p> Email: cu123@gmail.com</p> 
        <p> Stay Updated!</p>
        <form id="myForm">
          <input type="email" id="email" name="email" placeholder="Enter your email" required>
      
          <button type="submit">Sign Up</button>
        </form>
        <button id="clearDataButton" class="mt-32" onclick="clearData()"> Clear Data </button> 

        <label>
          <input type="checkbox" id="dataUsage" onclick="toggleDataStorage()" class="mt-32"> Opt out of local data storage?
        </label>
        
    </footer>
    </div>
     
      <script>
        
        //hamburger 
        const hamburger = document.querySelector('.nav-toggle');
        let toggled = false;
        hamburger.addEventListener('click', showInfo);

        const nav = document.querySelector(".nav-menu")
        function showInfo() {
            nav.classList.toggle("show");
            if (toggled == false){
                hamburger.setAttribute("aria-expanded", "true");
                hamburger.classList.toggle("rotate");
                toggled=true;
            }
            else
            {
                hamburger.setAttribute("aria-expanded", "false");
                hamburger.classList.toggle("rotate");
                toggled=false;
            }
        }
        //slideshow
        let slideIndex = 1;
        showSlides(slideIndex);
        
        //for arrows
        function plusDivs(n) {
          showSlides(slideIndex+=n);
        }
        //show slides
        function showSlides(n) {
            let i;
            let slides = document.getElementsByClassName("slideshow-photo");
            if (n > slides.length) {slideIndex = 1}
            if (n < 1) {slideIndex = slides.length}
            for (i = 0; i < slides.length; i++) {
              slides[i].style.display = "none";
            }
            slides[slideIndex-1].style.display = "block";
            setTimeout(showSlides, 2000); // Change image every 2 seconds

        }

        const checkbox = document.getElementById('dataUsage');
        const dataBool = localStorage.getItem('dataBool') == 'true';
        checkbox.checked = dataBool;

        if (!dataBool){
          // Save form data as user types
          document.getElementById('myForm').addEventListener('input', function(e) {
              localStorage.setItem('formData', JSON.stringify({
                  [e.target.name]: e.target.value
              }));
          });

          // Restore form data on page load
          const savedData = JSON.parse(localStorage.getItem('formData') || '{}');
          //grab email input field
          email_field = document.getElementById('email');
          //check and set data 
          if (savedData.email) {
            email_field.value = savedData['email'];
          }
          //In the code above I store the users email in a signup form that gets saved on page reload
          //The user can input anything into the email form and it will be saved in local storage
          //This allows a user to leave the page and have their data saved when they come back
        
        }

        //this code looks for checkbox being clicked and handles localStorage data based on it
        checkbox.addEventListener('change', function () {
        localStorage.setItem('dataBool', checkbox.checked);
        if (!checkbox.checked) {
          localStorage.removeItem('formData')} }); 

        function clearData() {
          localStorage.clear();
          email_field.value = '';
          checkbox.checked = false;
          localStorage.setItem('dataBool', false)
        }
        
        function toggleDataStorage() {
          localStorage.setItem('dataBool', false);
        }

      </script>
</body>
</html>